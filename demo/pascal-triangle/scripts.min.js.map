{"version":3,"sources":["component.js","main.js"],"names":["_possibleConstructorReturn","self","call","ReferenceError","_typeof","_inherits","subClass","superClass","TypeError","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","_classCallCheck","instance","Constructor","_createClass","defineProperties","target","props","i","length","descriptor","defineProperty","key","protoProps","staticProps","PascalTriangle","Component","name","_this","this","data","arguments","undefined","element","createElement","render","elements","queryElements","style","appendStyle","addEventListener","event","detail","modifier","get","set","css","Array","from","document","head","querySelectorAll","some","textContent","appendChild","component","html","innerHTML","firstElementChild","forEach","classList","className","split","replace","match","char","toUpperCase","isArray","push","cache","PascalTriangleEntry","_Component","row","column","_this2","getPrototypeOf","getPascalTriangleLine","class","func","_len","args","_key","JSON","stringify","apply","concat","map","index","values","_Component2","_this3","height","update","validity","valid","parseInt","line","_this4","triangle","childElementCount","removeChild","lastElementChild","fragment","createDocumentFragment","_","createLine","pageHeader","querySelector","container"],"mappings":"AAAA,YAIA,SAASA,4BAA2BC,EAAMC,GAAQ,IAAKD,EAAQ,KAAM,IAAIE,gBAAe,4DAAgE,QAAOD,GAAyB,gBAAhB,KAAOA,EAAP,YAAAE,QAAOF,KAAqC,kBAATA,GAA8BD,EAAPC,EAElO,QAASG,WAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIC,WAAU,gEAAA,KAAoED,EAApE,YAAAH,QAAoEG,IAAeD,GAASG,UAAYC,OAAOC,OAAOJ,GAAcA,EAAWE,WAAaG,aAAeC,MAAOP,EAAUQ,YAAY,EAAOC,UAAU,EAAMC,cAAc,KAAeT,IAAYG,OAAOO,eAAiBP,OAAOO,eAAeX,EAAUC,GAAcD,EAASY,UAAYX,GAEje,QAASY,iBAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIb,WAAU,2PAN5Gc,aAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAIC,GAAI,EAAGA,EAAID,EAAME,OAAQD,IAAK,CAAE,GAAIE,GAAaH,EAAMC,EAAIE,GAAWd,WAAac,EAAWd,aAAc,EAAOc,EAAWZ,cAAe,EAAU,SAAWY,KAAYA,EAAWb,UAAW,GAAML,OAAOmB,eAAeL,EAAQI,EAAWE,IAAKF,IAAiB,MAAO,UAAUP,EAAaU,EAAYC,GAAiJ,MAA9HD,IAAYR,EAAiBF,EAAYZ,UAAWsB,GAAiBC,GAAaT,EAAiBF,EAAaW,GAAqBX,MAQ5hBY,eAAiB,WAGnB,GAAIC,GAAY,WACd,QAASA,GAAUC,GACjB,GAAIC,GAAQC,KAERC,EAAOC,UAAUZ,OAAS,OAAsBa,KAAjBD,UAAU,GAAmBA,UAAU,GAAK,IAI/E,IAFApB,gBAAgBkB,KAAMH,IAEjBC,EAAM,KAAM,kBACjBE,MAAKF,KAAOA,EACZE,KAAKI,QAAUC,EAAcL,KAAMA,KAAKM,UACxCN,KAAKO,SAAWC,EAAcR,KAAKI,QAASN,GAChC,MAARG,IAAcD,KAAKC,KAAOA,GAC1BD,KAAKS,OAAOC,EAAYV,KAAKS,SACjCT,KAAKI,QAAQO,iBAAiB,WAAY,SAAUC,GAClD,MAAOb,GAAME,KAAOW,EAAMC,SA2B9B,MAvBA5B,cAAaY,IACXJ,IAAK,QACLjB,MAAO,WACL,GAAIsB,GAAOI,UAAUZ,OAAS,OAAsBa,KAAjBD,UAAU,GAAmBA,UAAU,GAAK,KAC3EY,EAAWZ,UAAUZ,OAAS,OAAsBa,KAAjBD,UAAU,GAAmBA,UAAU,GAAK,IAEnF,OAAOF,MAAKF,MAAQA,EAAO,KAAOA,EAAO,KAAOgB,EAAW,IAAMA,EAAW,OAG9ErB,IAAK,SACLjB,MAAO,WACL,KAAM,iCAGRiB,IAAK,OACLsB,IAAK,WACH,KAAM,iCAERC,IAAK,SAAaxC,GAChB,KAAM,oCAIHqB,KAGLa,EAAc,SAAqBO,GACrC,IAAKC,MAAMC,KAAKC,SAASC,KAAKC,iBAAiB,UAAUC,KAAK,SAAUd,GACtE,MAAOA,GAAMe,aAAeP,IAC1B,CACF,GAAIR,GAAQW,SAASf,cAAc,QACnCI,GAAMe,YAAcP,EACpBG,SAASC,KAAKI,YAAYhB,KAI1BJ,EAAgB,SAAuBqB,EAAWC,GACpD,GAAIvB,GAAUgB,SAASf,cAAc,MAGrC,OAFAD,GAAQwB,UAAYD,EACpBvB,EAAQyB,kBAAkBH,UAAYA,EAC/BtB,EAAQyB,mBAGbrB,EAAgB,SAAuBJ,EAASN,GAClD,GAAIS,KAeJ,OAdAW,OAAMC,KAAKf,EAAQkB,iBAAiB,WAAaxB,EAAO,QAAQgC,QAAQ,SAAU1B,GAChFc,MAAMC,KAAKf,EAAQ2B,WAAWD,QAAQ,SAAUE,GAC9C,GAAIlC,GAAOkC,EAAUC,MAAM,KAAM,GAAG,GAAGA,MAAM,IAAK,GAAG,GAAGC,QAAQ,QAAS,SAAUC,EAAOC,GACxF,MAAOA,GAAKC,eAET9B,GAAST,GAEFoB,MAAMoB,QAAQ/B,EAAST,IAGjCS,EAAST,GAAMyC,KAAKnC,GAFpBG,EAAST,IAASS,EAAST,GAAOM,GAFlCG,EAAST,GAAQM,MAQhBG,GAGLiC,KAeAC,EAAsB,SAAUC,GAGlC,QAASD,GAAoBE,EAAKC,GAChC9D,gBAAgBkB,KAAMyC,EAEtB,IAAII,GAASlF,2BAA2BqC,MAAOyC,EAAoB5D,WAAaR,OAAOyE,eAAeL,IAAsB5E,KAAKmC,KAAM,yBAGvI,OADA6C,GAAOzC,QAAQoB,YAAcuB,EAAsBJ,GAAKC,GACjDC,EAeT,MAvBA7E,WAAUyE,EAAqBC,GAW/BzD,aAAawD,IACXhD,IAAK,SACLjB,MAAO,WACL,MAAO,gBAAkBwB,KAAKgD,QAAU,eAG1CvD,IAAK,QACLjB,MAAO,WACL,MAAO,UAAYwB,KAAKgD,QAAU,iIAI/BP,GACP5C,GAEEkD,EAzCU,SAAiBE,GAC7B,MAAO,YACL,IAAK,GAAIC,GAAOhD,UAAUZ,OAAQ6D,EAAOjC,MAAMgC,GAAOE,EAAO,EAAGA,EAAOF,EAAME,IAC3ED,EAAKC,GAAQlD,UAAUkD,EAGzB,IAAI3D,GAAM4D,KAAKC,UAAUH,EAIzB,OAHKX,GAAM/C,KACT+C,EAAM/C,GAAOwD,EAAKM,UAAMpD,GAAWgD,IAE9BX,EAAM/C,KA+BmB,SAAUkD,GAC5C,MAAc,IAAPA,GAAY,IAAM,GAAGa,OAAOT,EAAsBJ,EAAM,IAAIc,IAAI,SAAUjF,EAAOkF,EAAOC,GAC7F,MAAOnF,IAASmF,EAAOD,EAAQ,IAAM,MA8DzC,OA1DqB,UAAUE,GAG7B,QAAShE,KACPd,gBAAgBkB,KAAMJ,EAEtB,IAAIiE,GAASlG,2BAA2BqC,MAAOJ,EAAef,WAAaR,OAAOyE,eAAelD,IAAiB/B,KAAKmC,KAAM,mBAK7H,OAHA6D,GAAOtD,SAASuD,OAAOnD,iBAAiB,QAAS,SAAUC,GACzDiD,EAAOE,OAAOnD,EAAMzB,OAAO6E,SAASC,MAAQC,SAAStD,EAAMzB,OAAOX,MAAO,IAAM,KAE1EqF,EA4CT,MAtDA7F,WAAU4B,EAAgBgE,GAa1B3E,aAAaW,IACXH,IAAK,aACLjB,MAAO,WACL,GAAI2F,GAAO/C,SAASf,cAAc,MAElC,OADA8D,GAAKnC,UAAYhC,KAAKgD,MAAM,iBACrBmB,KAGT1E,IAAK,SACLjB,MAAO,WACL,MAAO,qBAAuBwB,KAAKgD,QAAU,yBAA2BhD,KAAKgD,MAAM,OAAS,4BAA8BhD,KAAKgD,MAAM,SAAW,8DAAgEhD,KAAKgD,MAAM,UAAY,+EAAiFhD,KAAKgD,MAAM,YAAc,gCAGnVvD,IAAK,QACLjB,MAAO,WACL,MAAO,UAAYwB,KAAKgD,MAAM,YAAc,8DAAgEhD,KAAKgD,MAAM,iBAAmB,4EAG5IvD,IAAK,SACLjB,MAAO,SAAgBsF,GACrB,GAAIM,GAASpE,IAEb,IAAIA,KAAKO,SAAS8D,SAASC,kBAAoBR,EAC7C5C,MAAMC,KAAKD,MAAMlB,KAAKO,SAAS8D,SAASC,kBAAoBR,IAAShC,QAAQ,WAC3E,MAAOsC,GAAO7D,SAAS8D,SAASE,YAAYH,EAAO7D,SAAS8D,SAASG,wBAElE,IAAIxE,KAAKO,SAAS8D,SAASC,kBAAoBR,EAAQ,CAC5D,GAAIW,GAAWrD,SAASsD,wBACxBxD,OAAMC,KAAKD,MAAM4C,EAAS9D,KAAKO,SAAS8D,SAASC,oBAAoBxC,QAAQ,SAAU6C,EAAGjB,GACxF,GAAIf,GAAMyB,EAAO7D,SAAS8D,SAASC,kBAAoBZ,EACnDS,EAAOC,EAAOQ,YAClB1D,OAAMC,KAAKD,MAAMyB,EAAM,IAAIb,QAAQ,SAAUtD,EAAOoE,GAClDuB,EAAK1C,YAAY,GAAIgB,GAAoBE,EAAKC,GAAQxC,WAExDqE,EAAShD,YAAY0C,KAEvBnE,KAAKO,SAAS8D,SAAS5C,YAAYgD,QAKlC7E,GACPC,MCtMEgF,WAAazD,SAAS0D,cAAc,mBAE1CD,YAAWrD,YAAc,yBAEzB,IAAMuD,WAAY3D,SAAS0D,cAAc,uBACzCC,WAAUnD,UAAY,GACtBjB,iBAAiB,mBAAoB,WAAA,MAAMoE,WAAUtD,aAAY,GAAI7B,iBAAiBQ","file":"scripts.min.js","sourcesContent":["'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar PascalTriangle = function () {\n  'use strict';\n\n  var Component = function () {\n    function Component(name) {\n      var _this = this;\n\n      var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n      _classCallCheck(this, Component);\n\n      if (!name) throw 'No name argument';\n      this.name = name;\n      this.element = createElement(this, this.render());\n      this.elements = queryElements(this.element, name);\n      if (data != null) this.data = data;\n      if (this.style) appendStyle(this.style());\n      this.element.addEventListener('set-data', function (event) {\n        return _this.data = event.detail;\n      });\n    }\n\n    _createClass(Component, [{\n      key: 'class',\n      value: function _class() {\n        var name = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n        var modifier = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n        return this.name + (name ? '__' + name : '') + (modifier ? '_' + modifier : '');\n      }\n    }, {\n      key: 'render',\n      value: function render() {\n        throw 'render() is not implemented';\n      }\n    }, {\n      key: 'data',\n      get: function get() {\n        throw 'get data() is not implemented';\n      },\n      set: function set(value) {\n        throw 'set data() is not implemented';\n      }\n    }]);\n\n    return Component;\n  }();\n\n  var appendStyle = function appendStyle(css) {\n    if (!Array.from(document.head.querySelectorAll('style')).some(function (style) {\n      return style.textContent == css;\n    })) {\n      var style = document.createElement('style');\n      style.textContent = css;\n      document.head.appendChild(style);\n    }\n  };\n\n  var createElement = function createElement(component, html) {\n    var element = document.createElement('div');\n    element.innerHTML = html;\n    element.firstElementChild.component = component;\n    return element.firstElementChild;\n  };\n\n  var queryElements = function queryElements(element, name) {\n    var elements = {};\n    Array.from(element.querySelectorAll('[class^=' + name + '__]')).forEach(function (element) {\n      Array.from(element.classList).forEach(function (className) {\n        var name = className.split('__', 2)[1].split('_', 1)[0].replace(/-(.)/g, function (match, char) {\n          return char.toUpperCase();\n        });\n        if (!elements[name]) {\n          elements[name] = element;\n        } else if (!Array.isArray(elements[name])) {\n          elements[name] = [elements[name], element];\n        } else {\n          elements[name].push(element);\n        }\n      });\n    });\n    return elements;\n  };\n\n  var cache = {};\n  var memoize = function memoize(func) {\n    return function () {\n      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      var key = JSON.stringify(args);\n      if (!cache[key]) {\n        cache[key] = func.apply(undefined, args);\n      }\n      return cache[key];\n    };\n  };\n\n  var PascalTriangleEntry = function (_Component) {\n    _inherits(PascalTriangleEntry, _Component);\n\n    function PascalTriangleEntry(row, column) {\n      _classCallCheck(this, PascalTriangleEntry);\n\n      var _this2 = _possibleConstructorReturn(this, (PascalTriangleEntry.__proto__ || Object.getPrototypeOf(PascalTriangleEntry)).call(this, 'pascal-triangle-entry'));\n\n      _this2.element.textContent = getPascalTriangleLine(row)[column];\n      return _this2;\n    }\n\n    _createClass(PascalTriangleEntry, [{\n      key: 'render',\n      value: function render() {\n        return '<span class=\"' + this.class() + '\"></span>';\n      }\n    }, {\n      key: 'style',\n      value: function style() {\n        return '\\n    .' + this.class() + ' {\\n      display: inline-block;\\n      min-width: 1.5em;\\n      padding: 0 0.2em;\\n      text-align: center;\\n    }\\n    ';\n      }\n    }]);\n\n    return PascalTriangleEntry;\n  }(Component);\n\n  var getPascalTriangleLine = memoize(function (row) {\n    return row == 0 ? [1] : [0].concat(getPascalTriangleLine(row - 1)).map(function (value, index, values) {\n      return value + (values[index + 1] || 0);\n    });\n  });\n\n  var PascalTriangle = function (_Component2) {\n    _inherits(PascalTriangle, _Component2);\n\n    function PascalTriangle() {\n      _classCallCheck(this, PascalTriangle);\n\n      var _this3 = _possibleConstructorReturn(this, (PascalTriangle.__proto__ || Object.getPrototypeOf(PascalTriangle)).call(this, 'pascal-triangle'));\n\n      _this3.elements.height.addEventListener('input', function (event) {\n        _this3.update(event.target.validity.valid ? parseInt(event.target.value, 10) : 0);\n      });\n      return _this3;\n    }\n\n    _createClass(PascalTriangle, [{\n      key: 'createLine',\n      value: function createLine() {\n        var line = document.createElement('div');\n        line.className = this.class('triangle-line');\n        return line;\n      }\n    }, {\n      key: 'render',\n      value: function render() {\n        return '\\n    <div class=\"' + this.class() + '\">\\n      <div class=\"' + this.class('row') + '\">\\n        <span class=\"' + this.class('label') + '\">Triangle height:</span>\\n        <input autofocus class=\"' + this.class('height') + '\" max=\"50\" min=\"2\" required type=\"number\">\\n      </div>\\n      <div class=\"' + this.class('triangle') + '\"></div>\\n    </div>\\n    ';\n      }\n    }, {\n      key: 'style',\n      value: function style() {\n        return '\\n    .' + this.class('triangle') + ' {\\n      display: table;\\n      width: 100%;\\n    }\\n    .' + this.class('triangle-line') + ' {\\n      text-align: center;\\n      white-space: nowrap;\\n    }\\n    ';\n      }\n    }, {\n      key: 'update',\n      value: function update(height) {\n        var _this4 = this;\n\n        if (this.elements.triangle.childElementCount > height) {\n          Array.from(Array(this.elements.triangle.childElementCount - height)).forEach(function () {\n            return _this4.elements.triangle.removeChild(_this4.elements.triangle.lastElementChild);\n          });\n        } else if (this.elements.triangle.childElementCount < height) {\n          var fragment = document.createDocumentFragment();\n          Array.from(Array(height - this.elements.triangle.childElementCount)).forEach(function (_, index) {\n            var row = _this4.elements.triangle.childElementCount + index;\n            var line = _this4.createLine();\n            Array.from(Array(row + 1)).forEach(function (value, column) {\n              line.appendChild(new PascalTriangleEntry(row, column).element);\n            });\n            fragment.appendChild(line);\n          });\n          this.elements.triangle.appendChild(fragment);\n        }\n      }\n    }]);\n\n    return PascalTriangle;\n  }(Component);\n\n  return PascalTriangle;\n}();\n","const pageHeader = document.querySelector('.toolbar__header');\n\npageHeader.textContent = 'Test application header';\n\nconst container = document.querySelector('.component-container');\ncontainer.innerHTML = '';\naddEventListener('DOMContentLoaded', () => container.appendChild(new PascalTriangle().element));\n"]}